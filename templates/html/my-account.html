{% extends "base.html" %}

{% block css %}
<script src="static/js/jquery.js"></script>
{% end %}

{% block header %}
<header class="intro-header" style="background-image: url('static/img/post-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="site-heading">
                    <h2>My Account</h2>
                    <hr class="small">
                    <span id='description' class="subheading">There are many like it, but this one is mine.</span><br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
{% end %}

{% block content %}
<div class="container">
      <div class="row">
      <div class="col-md-5 pull-right ">
           <a href="edit.html" >Edit Profile</a>
      </div>
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xs-offset-0 col-sm-offset-0 col-md-offset-3 col-lg-offset-3 toppad" >
          <div class="panel panel-info">
            <div class="panel-heading">
              <h3 class="panel-title">Sheena Shrestha</h3>
            </div>
            <div class="panel-body">
              <div class="row">
                <div class="col-md-3 col-lg-3 " align="center"> <img alt="User Pic" src="http://babyinfoforyou.com/wp-content/uploads/2014/10/avatar-300x300.png" class="img-circle img-responsive"> </div>
                <div class=" col-md-9 col-lg-9 ">
                  <table class="table table-user-information">
                    <tbody>
                      <tr>
                        <td>Department:</td>
                        <td>Programming</td>
                      </tr>
                      <tr>
                        <td>Hire date:</td>
                        <td>06/23/2013</td>
                      </tr>
                      <tr>
                        <td>Date of Birth</td>
                        <td>01/24/1988</td>
                      </tr>
                      </tr>
                      <tr>
                        <td>Email</td>
                        <td><a href="mailto:info@support.com">info@support.com</a></td>
                      </tr>
                        <td>Phone</td>
                        <td>123-4567-890<br>
                        </td>

                      </tr>

                    </tbody>
                  </table>
                </div>
              </div>
            </div>
                 <div class="panel-footer">
                        <a data-original-title="Broadcast Message" data-toggle="tooltip" type="button" class="btn btn-sm btn-primary"><i class="glyphicon glyphicon-envelope"></i></a>
                        <span class="pull-right">
                            <a href="edit.html" data-original-title="Edit this user" data-toggle="tooltip" type="button" class="btn btn-sm btn-warning"><i class="glyphicon glyphicon-edit"></i></a>
                            <a data-original-title="Remove this user" data-toggle="tooltip" type="button" class="btn btn-sm btn-danger"><i class="glyphicon glyphicon-remove"></i></a>
                        </span>
                    </div>

          </div>
        </div>
      </div>
    </div>

<div class="row">
        <div id='results' class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        </div>
</div>
<script>
$.ajax({
    type:"GET",
    url:"/user_posts"
}).complete(function(o){
    j = o.responseText;
    console.log(j);
    obj = JSON.parse(j);
    $("#results").html("");
    for (var i = 0; i < obj.length; i++) {
        $("#results").append($("<div>", {"class":"post-preview"}).append(
            $("<h2>", {"class":"post-title"}).text(obj[i].title).append(
                $("<h3>", {"class":"post-subtitle"}).text(obj[i].content.slice(0,15) + "...\n" + "Feeling: " + obj[i].feeling).css("font-weight","normal")
            .append(
                $("<p>", {"class":"post-meta"}).text("Posted by: " + obj[i].author)))
        )).append($("<a>",{"class":"btn btn-sm btn-primary","href":"#","text":"Likes: " + obj[i].likes + " "}).append($("<span>",{"class":"glyphicon glyphicon-thumbs-up"}))).append("<hr>");
    }
    $("#results").html($("#results").html().replace(/\n/g,'<br/>'));


})
</script>
{% end %}
